
在 Linux 下，printf 输出到控制台经历了 `app`->`libc`->`syscall`->`console` 驱动四个阶段。

# app

首先是用户态代码调用 printf 函数。printf 函数首先会检查其格式字符串中的特殊字符，如%d、%s 等，并根据这些特殊字符和传递给 printf 函数的参数来生成要输出的字符串。

```cpp
printf("hello, world!\n");
```

# libc

要能使用 printf 需要先包含：

```cpp
#include <stdio.h>
```

因为 printf 它是一个 libc 实现的标准库函数，定义如下：

```cpp
int printf(const char *format, ...);
```

想了解它怎么实现的, 最快速的办法不是看源码, 而是看 `man 3 printf`

![2023-07-04-10-43-03.png](./images/2023-07-04-10-43-03.png)

