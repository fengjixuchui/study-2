
KVM: Generalize exception injection mechanism, 298101da2f507c13eaf179ee4507a7c0fe3e7b06

KVM: Replace page fault injection by the generalized exception queue, c3c91fee5195ba5176a6da5ddc2a2822243eb79f

KVM: Replace #GP injection by the generalized exception queue, c1a5d4f990ce034bcb19aebbb910c07019e60f6b

KVM: Use generalized exception queue for injecting #UD, 7ee5d940f5064a7a4f0e53a8ffe755bc26a8b0f1

KVM: x86 emulator: fix eflags preparation for emulation, e934c9c1c8742872a53efb84966d9c1d7b8c8e24

KVM: VMX: Avoid exit when setting cr8 if the local apic is in the kernel, e5314067f6a77688a3d36548e7618430ce4a6236

KVM: SVM: Emulate read/write access to cr8, 152ff9be2ed11e76ed3014b94eacdd6bc9275518

KVM: x86 emulator: Fix stack instructions on 64-bit mode, 6e3d5dfbad4d8c29bdf8ed160f91f955f0efc12b

KVM: SVM: Trap access to the cr8 register, 80a8119ca3f021037b8513d39dbb0ffd1af86b20

给 kvm_vcpu 添加字段:

```cpp
struct kvm_vcpu {
    ...
    struct kvm_queued_exception {
        bool pending;
        bool has_error_code;
        u8 nr;
        u32 error_code;
    } exception;
    ...
}
```

在进入 guest 之前:

```cpp

if (vcpu->exception.pending)
    __queue_exception(vcpu);
else if (irqchip_in_kernel(vcpu->kvm))
    kvm_x86_ops->inject_pending_irq(vcpu);
else
    kvm_x86_ops->inject_pending_vectors(vcpu, kvm_run);
```
