虚拟化技术从最初的纯软件的虚拟化技术, 逐步发展到硬件虚拟化技术的支持, 时至今日硬件虚拟化技术已比较成熟. 前面 3 小节已经分别就各种硬件虚拟化技术进行了介绍, 这里以 Intel 平台为例, 再对其做一个小结.

Intel 硬件虚拟化技术大致分为如下 3 个类别(这个顺序也基本上是相应技术出现的时间先后顺序).

1)**VT-x 技术**: 是指 Intel 处理器中进行的一些虚拟化技术支持, 包括**CPU**中引入的最基础的**VMX 技术**, 使得 KVM 等硬件虚拟化基础的出现成为可能. 同时也包括**内存虚拟化**的硬件支持 **EPT、VPID** 等技术.

2)**VT-d** 技术: 是指 Intel 的**芯片组(南桥)的虚拟化**技术支持, 通过 Intel **IOMMU**可以实现对**设备直接分配**的支持.

VT-d 技术可下载 <Intel Virtualization Technology for Directed I/O Architecture Specification> 文档

3)**VT-c**技术: 是指 Intel 的**I/O 设备**相关的虚拟化技术支持, 主要包含**两个技术**:

- 一个是借助**虚拟机设备队列(VMDq**)最大限度提高 I/O 吞吐率, VMDq 由**Intel 网卡！！！** 中的**专用硬件**来完成;
- 另一个是借助**虚拟机直接互连(VMDc**)大幅提升虚拟化性能, VMDc 主要就是**基于 SR-IOV 标准**将**单个 Intel 网卡**产生**多个 VF 设备**, 用来**直接分配**给客户机.

图 2-7 展示了 Intel 的硬件虚拟化技术的发展线路图, 从中我们可以看到从 2005 年开始支持 VT-x 硬件虚拟化, 到现在较多的 SR-IOV 等 VT-d 的虚拟化技术, 硬件虚拟化技术家族有了越来越多的成员, 技术特性也逐步完善. 如何在具体业务的生产环境中充分利用硬件虚拟化技术带来的技术红利, 构建高性能、可扩展、易维护的虚拟化环境, 可能是大家学习虚拟化的一个主要目标. 通过本书, 希望大家也能够了解一些实践经验和受到一些启发.

![](./images/2019-05-14-10-43-32.png)

![](./images/2019-05-14-10-43-51.png)